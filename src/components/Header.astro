---
import { siteConfig } from "../config";
const sections = [
  { id: "perfil", labelEs: "Perfil", labelEn: "Profile" },
  { id: "trayectoria", labelEs: "Trayectoria", labelEn: "Experience" },
  { id: "toolkit", labelEs: "Toolkit", labelEn: "Toolkit" },
  { id: "formacion", labelEs: "Formación", labelEn: "Education" },
  { id: "personal", labelEs: "Sobre Mí", labelEn: "About Me" },
  { id: "contacto", labelEs: "Contacto", labelEn: "Contact" },
];
---

<header
  id="floating-header"
  class="fixed top-4 left-1/2 -translate-x-1/2 z-50 opacity-0 pointer-events-none"
>
  <nav
    class="flex items-center gap-1 px-2 py-1.5 rounded-full border border-[var(--color-primary-light)]/30 shadow-lg"
    style="background: rgba(250, 249, 247, 0.92); backdrop-filter: blur(12px);"
  >
    <span
      class="text-sm font-bold px-3 py-1 rounded-full"
      style="background: var(--color-primary-dark); color: white;"
    >
      LL
    </span>
    <div class="hidden md:flex items-center gap-0.5">
      {sections.map((s) => (
        <a
          href={`#${s.id}`}
          class="i18n text-xs font-medium px-3 py-1.5 rounded-full transition-colors duration-200 hover:text-white"
          style="color: var(--color-primary-dark);"
          data-es={s.labelEs}
          data-en={s.labelEn}
          onmouseover="this.style.background='var(--color-primary)';this.style.color='white'"
          onmouseout="this.style.background='transparent';this.style.color='var(--color-primary-dark)'"
        >
          {s.labelEs}
        </a>
      ))}
      <!-- Lang toggle in header -->
      <button
        class="lang-toggle text-xs font-bold px-3 py-1.5 rounded-full cursor-pointer ml-1"
        style="background: var(--color-accent); color: white;"
        aria-label="Switch language"
      >
        <span class="lang-label">EN</span>
      </button>
    </div>
    <!-- Mobile hamburger -->
    <button
      id="mobile-menu-btn"
      class="md:hidden p-2 rounded-full"
      style="color: var(--color-primary-dark);"
      aria-label="Abrir menú"
    >
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
        <line x1="3" y1="6" x2="21" y2="6"/>
        <line x1="3" y1="12" x2="21" y2="12"/>
        <line x1="3" y1="18" x2="21" y2="18"/>
      </svg>
    </button>
  </nav>

  <!-- Mobile dropdown -->
  <div
    id="mobile-menu"
    class="hidden md:hidden mt-2 rounded-2xl border border-[var(--color-primary-light)]/30 shadow-lg p-3"
    style="background: rgba(250, 249, 247, 0.95); backdrop-filter: blur(12px);"
  >
    {sections.map((s) => (
      <a
        href={`#${s.id}`}
        class="mobile-nav-link i18n block text-sm font-medium px-4 py-2.5 rounded-xl transition-colors duration-200"
        style="color: var(--color-primary-dark);"
        data-es={s.labelEs}
        data-en={s.labelEn}
      >
        {s.labelEs}
      </a>
    ))}
    <button
      class="lang-toggle block w-full text-sm font-bold px-4 py-2.5 rounded-xl mt-1 cursor-pointer text-center"
      style="background: var(--color-accent); color: white;"
    >
      <span class="lang-label">EN</span>
    </button>
  </div>
</header>

<script>
  const header = document.getElementById('floating-header');
  const mobileBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');

  window.addEventListener('scroll', () => {
    if (window.scrollY > 400) {
      header?.classList.remove('opacity-0', 'pointer-events-none');
      header?.classList.add('header-visible');
    } else {
      header?.classList.add('opacity-0', 'pointer-events-none');
      header?.classList.remove('header-visible');
    }
  });

  mobileBtn?.addEventListener('click', () => {
    mobileMenu?.classList.toggle('hidden');
  });

  document.querySelectorAll('.mobile-nav-link').forEach(link => {
    link.addEventListener('click', () => {
      mobileMenu?.classList.add('hidden');
    });
  });
</script>
