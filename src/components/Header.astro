---
import { siteConfig } from "../config";
const sections = [
  { id: "perfil", label: "Perfil" },
  { id: "trayectoria", label: "Trayectoria" },
  { id: "toolkit", label: "Toolkit" },
  { id: "formacion", label: "Formación" },
  { id: "personal", label: "Sobre Mí" },
  { id: "contacto", label: "Contacto" },
];
---

<header
  id="floating-header"
  class="fixed top-4 left-1/2 -translate-x-1/2 z-50 opacity-0 pointer-events-none"
>
  <nav
    class="flex items-center gap-1 px-2 py-1.5 rounded-full border border-[var(--color-primary-light)]/30 shadow-lg"
    style="background: rgba(250, 249, 247, 0.92); backdrop-filter: blur(12px);"
  >
    <span
      class="text-sm font-bold px-3 py-1 rounded-full"
      style="background: var(--color-primary-dark); color: white;"
    >
      LL
    </span>
    <div class="hidden md:flex items-center gap-0.5">
      {sections.map((s) => (
        <a
          href={`#${s.id}`}
          class="text-xs font-medium px-3 py-1.5 rounded-full transition-colors duration-200 hover:text-white"
          style="color: var(--color-primary-dark);"
          onmouseover="this.style.background='var(--color-primary)';this.style.color='white'"
          onmouseout="this.style.background='transparent';this.style.color='var(--color-primary-dark)'"
        >
          {s.label}
        </a>
      ))}
    </div>
    <!-- Mobile hamburger -->
    <button
      id="mobile-menu-btn"
      class="md:hidden p-2 rounded-full"
      style="color: var(--color-primary-dark);"
      aria-label="Abrir menú"
    >
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
        <line x1="3" y1="6" x2="21" y2="6"/>
        <line x1="3" y1="12" x2="21" y2="12"/>
        <line x1="3" y1="18" x2="21" y2="18"/>
      </svg>
    </button>
  </nav>

  <!-- Mobile dropdown -->
  <div
    id="mobile-menu"
    class="hidden md:hidden mt-2 rounded-2xl border border-[var(--color-primary-light)]/30 shadow-lg p-3"
    style="background: rgba(250, 249, 247, 0.95); backdrop-filter: blur(12px);"
  >
    {sections.map((s) => (
      <a
        href={`#${s.id}`}
        class="mobile-nav-link block text-sm font-medium px-4 py-2.5 rounded-xl transition-colors duration-200"
        style="color: var(--color-primary-dark);"
      >
        {s.label}
      </a>
    ))}
  </div>
</header>

<script>
  const header = document.getElementById('floating-header');
  const mobileBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');

  let lastScroll = 0;
  window.addEventListener('scroll', () => {
    const y = window.scrollY;
    if (y > 400) {
      header?.classList.remove('opacity-0', 'pointer-events-none');
      header?.classList.add('header-visible');
    } else {
      header?.classList.add('opacity-0', 'pointer-events-none');
      header?.classList.remove('header-visible');
    }
    lastScroll = y;
  });

  mobileBtn?.addEventListener('click', () => {
    mobileMenu?.classList.toggle('hidden');
  });

  document.querySelectorAll('.mobile-nav-link').forEach(link => {
    link.addEventListener('click', () => {
      mobileMenu?.classList.add('hidden');
    });
  });
</script>
